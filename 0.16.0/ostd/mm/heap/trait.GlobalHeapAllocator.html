<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The trait for the global heap allocator."><title>GlobalHeapAllocator in ostd::mm::heap - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-cf3c48c1.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="ostd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (854f22563 2025-01-31)" data-channel="nightly" data-search-js="search-2d513d54.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-302de22f.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-9b5d7e41.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../ostd/index.html">ostd</a><span class="version">0.16.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Global<wbr>Heap<wbr>Allocator</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.alloc" title="alloc">alloc</a></li><li><a href="#tymethod.dealloc" title="dealloc">dealloc</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In ostd::<wbr>mm::<wbr>heap</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">ostd</a>::<wbr><a href="../index.html">mm</a>::<wbr><a href="index.html">heap</a></div><h1>Trait <span class="trait">GlobalHeapAllocator</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/ostd/mm/heap/mod.rs.html#33-52">Source</a> </span></div><pre class="rust item-decl"><code>pub trait GlobalHeapAllocator: Sync {
    // Required methods
    fn <a href="#tymethod.alloc" class="fn">alloc</a>(&amp;self, layout: Layout) -&gt; Result&lt;<a class="struct" href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot">HeapSlot</a>, AllocError&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.dealloc" class="fn">dealloc</a>(&amp;self, slot: <a class="struct" href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot">HeapSlot</a>) -&gt; Result&lt;(), AllocError&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The trait for the global heap allocator.</p>
<p>By providing the slab (<a href="type.Slab.html" title="type ostd::mm::heap::Slab"><code>Slab</code></a>) and heap slot (<a href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot"><code>HeapSlot</code></a>)
mechanisms, OSTD allows users to implement their own kernel heap in a safe
manner, as an alternative to the unsafe [<code>core::alloc::GlobalAlloc</code>].</p>
<p>To provide the global heap allocator, use <a href="../../attr.global_heap_allocator.html" title="attr ostd::global_heap_allocator"><code>crate::global_heap_allocator</code></a>
to mark a static variable that implements this trait. Use
<a href="../../attr.global_heap_allocator_slot_map.html" title="attr ostd::global_heap_allocator_slot_map"><code>crate::global_heap_allocator_slot_map</code></a> to specify the sizes of
slots for different layouts. This latter restriction may be lifted in the
future.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.alloc" class="method"><a class="src rightside" href="../../../src/ostd/mm/heap/mod.rs.html#43">Source</a><h4 class="code-header">fn <a href="#tymethod.alloc" class="fn">alloc</a>(&amp;self, layout: Layout) -&gt; Result&lt;<a class="struct" href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot">HeapSlot</a>, AllocError&gt;</h4></section></summary><div class="docblock"><p>Allocates a <a href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot"><code>HeapSlot</code></a> according to the layout.</p>
<p>OSTD calls this method to allocate memory from the global heap.</p>
<p>The returned <a href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot"><code>HeapSlot</code></a> must be valid for the layout, i.e., the size
must be at least the size of the layout and the alignment must be at
least the alignment of the layout. Furthermore, the size of the
returned <a href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot"><code>HeapSlot</code></a> must match the size returned by the function
marked with <a href="../../attr.global_heap_allocator_slot_map.html" title="attr ostd::global_heap_allocator_slot_map"><code>crate::global_heap_allocator_slot_map</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.dealloc" class="method"><a class="src rightside" href="../../../src/ostd/mm/heap/mod.rs.html#51">Source</a><h4 class="code-header">fn <a href="#tymethod.dealloc" class="fn">dealloc</a>(&amp;self, slot: <a class="struct" href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot">HeapSlot</a>) -&gt; Result&lt;(), AllocError&gt;</h4></section></summary><div class="docblock"><p>Deallocates a <a href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot"><code>HeapSlot</code></a>.</p>
<p>OSTD calls this method to deallocate memory back to the global heap.</p>
<p>Each deallocation must correspond to exactly one previous allocation. The provided
<a href="struct.HeapSlot.html" title="struct ostd::mm::heap::HeapSlot"><code>HeapSlot</code></a> must match the one returned from the original allocation.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">ยง</a></h2><div id="implementors-list"></div><script src="../../../trait.impl/ostd/mm/heap/trait.GlobalHeapAllocator.js" async></script></section></div></main></body></html>