<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`aml` is a pure-Rust AML (ACPI Machine Language) parser, used for parsing the DSDT and SSDT tables from ACPI. This crate can be used by kernels to gather information about the hardware, and invoke control methods to query and change the state of devices in a hardware-independent way."><title>aml - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-bf502f66ec635d5d.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="aml" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (e51e98dde 2023-12-31)" data-channel="nightly" data-search-js="search-c17e98913a53b3b7.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0b2e2def73e61cbe.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../aml/index.html">aml</a><span class="version">0.16.4</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../aml/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">aml</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/aml/lib.rs.html#1-814">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>aml</code> is a pure-Rust AML (ACPI Machine Language) parser, used for parsing the DSDT and
SSDT tables from ACPI. This crate can be used by kernels to gather information about the
hardware, and invoke control methods to query and change the state of devices in a
hardware-independent way.</p>
<h4 id="using-the-library"><a href="#using-the-library">Using the library</a></h4>
<p>To use the library, you should create an <code>AmlContext</code> using <code>AmlContext::new()</code>, and then pass it tables
containing AML (probably from the <code>acpi</code> crate), which you’ve mapped into the virtual address space. This will
parse the table, populating the namespace with objects encoded by the AML. After this, you may unmap the memory
the table was mapped into - all the information needed will be extracted and allocated on the heap.</p>
<p>You can then access specific objects by name like so: e.g.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>my_aml_value = aml_context.lookup(<span class="kw-2">&amp;</span>AmlName::from_str(<span class="string">"\\_SB.PCI0.S08._ADR"</span>).unwrap());</code></pre></div>
<p>And invoke control methods like this: e.g.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>result = aml_context.invoke_method(<span class="kw-2">&amp;</span>AmlName::from_str(<span class="string">"\\_SB.HPET._CRS"</span>).unwrap(), value::Args::EMPTY);</code></pre></div>
<h4 id="about-the-parser"><a href="#about-the-parser">About the parser</a></h4>
<p>The parser is written using a set of custom parser combinators - the code can be confusing on
first reading, but provides an extensible and type-safe way to write parsers. For an easy
introduction to parser combinators and the foundations used for this library, I suggest reading
<a href="https://bodil.lol/parser-combinators/">Bodil’s fantastic blog post</a>.</p>
<p>The actual combinators can be found in <code>parser.rs</code>. Various tricks are used to provide a nice
API and work around limitations in the type system, such as the concrete types like
<code>MapWithContext</code>.</p>
<p>The actual parsers are then grouped into categories based loosely on the AML grammar sections in
the ACPI spec. Most are written in terms of combinators, but some have to be written in a more
imperitive style, either because they’re clearer, or because we haven’t yet found good
combinator patterns to express the parse.</p>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.AmlValue"><code>pub use crate::value::<a class="enum" href="value/enum.AmlValue.html" title="enum aml::value::AmlValue">AmlValue</a>;</code></div></li></ul><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pci_routing/index.html" title="mod aml::pci_routing">pci_routing</a></div></li><li><div class="item-name"><a class="mod" href="resource/index.html" title="mod aml::resource">resource</a></div></li><li><div class="item-name"><a class="mod" href="value/index.html" title="mod aml::value">value</a></div></li></ul><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AmlContext.html" title="struct aml::AmlContext">AmlContext</a></div></li><li><div class="item-name"><a class="struct" href="struct.AmlHandle.html" title="struct aml::AmlHandle">AmlHandle</a></div><div class="desc docblock-short">A handle is used to refer to an AML value without actually borrowing it until you need to
access it (this makes borrowing situation much easier as you only have to consider who’s
borrowing the namespace). They can also be cached to avoid expensive namespace lookups.</div></li><li><div class="item-name"><a class="struct" href="struct.AmlName.html" title="struct aml::AmlName">AmlName</a></div></li><li><div class="item-name"><a class="struct" href="struct.Namespace.html" title="struct aml::Namespace">Namespace</a></div></li><li><div class="item-name"><a class="struct" href="struct.NamespaceLevel.html" title="struct aml::NamespaceLevel">NamespaceLevel</a></div></li></ul><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AmlError.html" title="enum aml::AmlError">AmlError</a></div><div class="desc docblock-short">Used when an <a href="struct.AmlContext.html" title="struct aml::AmlContext"><code>AmlContext</code></a> encounters an error.</div></li><li><div class="item-name"><a class="enum" href="enum.DebugVerbosity.html" title="enum aml::DebugVerbosity">DebugVerbosity</a></div><div class="desc docblock-short">Describes how much debug information the parser should emit. Set the “maximum” expected verbosity in
the context’s <code>debug_verbosity</code> - everything will be printed that is less or equal in ‘verbosity’.</div></li><li><div class="item-name"><a class="enum" href="enum.LevelType.html" title="enum aml::LevelType">LevelType</a></div></li><li><div class="item-name"><a class="enum" href="enum.NameComponent.html" title="enum aml::NameComponent">NameComponent</a></div></li></ul><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.AML_INTERPRETER_REVISION.html" title="constant aml::AML_INTERPRETER_REVISION">AML_INTERPRETER_REVISION</a></div><div class="desc docblock-short">AML has a <code>RevisionOp</code> operator that returns the “AML interpreter revision”. It’s not clear
what this is actually used for, but this is ours.</div></li></ul><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Handler.html" title="trait aml::Handler">Handler</a></div><div class="desc docblock-short">Trait type used by <a href="struct.AmlContext.html" title="struct aml::AmlContext"><code>AmlContext</code></a> to handle reading and writing to various types of memory in the system.</div></li></ul></section></div></main></body></html>